# Docker Hardening: Cards & Payments (SQB)

## Цель

Собрать и запустить сервисы **Cards** и **Payments** в Docker **без root**, с использованием **реальных конфигурационных файлов из Linux baseline**, с режимом **read-only** для файловой системы контейнера и **read-only** для конфигов, чтобы снизить риск компрометации и ограничить blast radius.

## Контекст (банковские сервисы)

Модули **Cards** и **Payments** обрабатывают финансовые операции в **SQB Mobile (B2C)** и **SQB Business (B2B)**.  
Компрометация одного сервиса не должна автоматически давать доступ ко второму, а чувствительные конфиги (пароли/эндпоинты) должны быть защищены от чтения/изменений.

## Что сделано: шаги и результат

### 1) Подготовлен Linux Security Baseline (Host level)

На хосте создана структура директорий сервисов:

- /opt/sqb/cards
- /opt/sqb/payments

Для изоляции сервисов используются отдельные Linux-пользователи:

- cards_srv
- payments_srv

Права на директории настроены так, чтобы сервисы были изолированы друг от друга (принцип **least privilege**).

Проверки выполнялись командами:

- ls -ld /opt/sqb/*
- id cards_srv, id payments_srv

### 2) Подготовлены конфигурационные файлы на хосте

Созданы и размещены реальные конфиги в Linux baseline:
/opt/sqb/cards/config.env
/opt/sqb/payments/config.env

Настроены права:
- владелец: соответствующий сервисный пользователь
- права: 600 (только владелец может читать/писать)

Проверка прав:
sudo ls -l /opt/sqb/cards/config.env
sudo ls -l /opt/sqb/payments/config.env



