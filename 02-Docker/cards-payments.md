Я реализовал изолированные Docker-контейнеры для Cards и Payments с запуском не от root, минимальной атакующей поверхностью и централизованным логированием через Portainer:
# Docker Security Baseline: Cards & Payments (SQB)

## Область применения
Данный кейс демонстрирует базовую защиту Docker и изоляцию сервисов
**Cards** и **Payments**, используемых в **SQB Mobile (B2C)** и **SQB Business (B2B)**.

## Что было реализовано

### 1. Установка и проверка Docker
- Установлен Docker Engine на Ubuntu 24.04
- Проверена корректность установки через `hello-world`
- Развёрнут Portainer CE для управления контейнерами через UI

### 2. Безопасные Docker-образы
- Собраны кастомные Docker-образы:
  - `sqb/cards-service:secure`
  - `sqb/payments-service:secure`
- Использован минимальный базовый образ `alpine:3.19`
- Контейнеры запускаются **не от root**, а от отдельных пользователей:
  - `cards`
  - `payments`

### 3. Принцип наименьших привилегий
- Контейнеры не используют `privileged` режим
- Хост-порты не публикуются
- Не включены лишние Linux capabilities
- Каждый сервис изолирован на уровне пользователя и образа

### 4. Неизменяемость контейнеров (Immutable containers)
- Пользователи и группы создаются на этапе сборки образа
- Во время выполнения контейнера изменения пользователей запрещены
- Минимизация возможностей эскалации привилегий

### 5. Изоляция сервисов
- Cards и Payments развернуты как **отдельные контейнеры**
- Независимые образы, логи и жизненный цикл
- Компрометация одного сервиса не затрагивает другой

### 6. Логирование и наблюдаемость
- Каждый сервис пишет собственные логи:
  - `[cards] heartbeat`
  - `[payments] heartbeat`
- Логи доступны через интерфейс Portainer
- Обеспечена базовая аудитоспособность

### 7. Управление через UI (Portainer)
- Контейнеры развёрнуты и управляются через Portainer CE
- Просмотр логов, статусов и параметров контейнеров
- Демонстрация изоляции сервисов без прямой работы в CLI

## Результат с точки зрения безопасности

- Снижен blast radius при компрометации сервиса
- Реализован принцип наименьших привилегий
- Повышена прозрачность и аудит операций
- Получена production-ориентированная Docker-база, применимая в банке
